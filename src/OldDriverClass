import javafx.animation.KeyFrame;
import javafx.animation.Timeline;
import javafx.application.Application;
import javafx.scene.Group;
import javafx.scene.Scene;
import javafx.scene.image.Image;
import javafx.scene.image.ImageView;
import javafx.scene.input.KeyCode;
import javafx.scene.paint.Color;
import javafx.scene.paint.Paint;
import javafx.scene.shape.Rectangle;
import javafx.scene.shape.Shape;
import javafx.stage.Stage;
import javafx.util.Duration;

public class Driver extends Application {
	//Picture constants
	public static final int SCREEN_BASE = 400;
	public static final int SCREEN_HEIGHT = 600;
	//Animation timing constants
	public static final int FRAME_DELAY_MILLISECONDS = 15;
	//Level-related constants/variables
	public static final int NUM_LEVELS = 1;
	public static Screen[] screens = new Screen[NUM_LEVELS + 1];
	
	public static void main(String[] args){
		launch(args);
	}
	@Override
	public void start(Stage stage) throws Exception {
		//Initialize Startup and Level objects
		
		Startup startup = new Startup();
		for(int level = 1; level <= NUM_LEVELS; level++){
			screens[level] = new Level(level, SCREEN_BASE, SCREEN_HEIGHT, FRAME_DELAY_MILLISECONDS);
		}
		
		Scene scene = startup.initialize(screens);
		stage.setScene(scene);
		stage.setTitle("Breakout: Laboratory Edition.");
		stage.show();
		
		KeyFrame f = new KeyFrame(Duration.millis(FRAME_DELAY_MILLISECONDS), e -> startup.step());
		Timeline t = new Timeline();
		t.setCycleCount(Timeline.INDEFINITE); //will probably change when add more levels - need to research!
		t.getKeyFrames().add(f);
		t.play();
		
		/*
		//Startup and Level classes know when to terminate themselves
		//Startup startup = new Startup(primaryStage, SCREEN_BASE, SCREEN_HEIGHT);
		//startup.run();
		Level level = new Level(1, primaryStage, SCREEN_BASE, SCREEN_HEIGHT, FRAME_DELAY_MILLISECONDS);
		level.run();
		/*
		for(int i = 0; i < NUM_LEVELS; i++){
			levels[i] = new Level(i + 1, primaryStage, SCREEN_BASE, SCREEN_HEIGHT, FRAME_DELAY_MILLISECONDS); //i is level number
			levels[i].run();
		}
		*/
	}
	/*
	private void setupScreen(Stage stage, Screen screen){
		//Run setup/animation code - from CS 308 demo Example_Bounce
		Scene scene = screen.initialize();
		stage.setScene(scene);
		stage.setTitle("Breakout: Laboratory Edition.");
		stage.show();
		
		KeyFrame f = new KeyFrame(Duration.millis(FRAME_DELAY_MILLISECONDS), e -> screen.step());
		Timeline t = new Timeline();
		t.setCycleCount(Timeline.INDEFINITE); //will probably change when add more levels - need to research!
		t.getKeyFrames().add(f);
		t.play();
	}
	*/
}
